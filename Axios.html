<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Axios API</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- Latest compiled and minified CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css">

    
    <!-- jQuery library -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

    <!-- Popper JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.0/umd/popper.min.js"></script>

    <!-- Latest compiled JavaScript -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
    <script src = "https://code.jquery.com/jquery-3.5.1.min.js"></script>
    <style>
        .page-header{
            padding-bottom: 9px;margin: 40px 0 20px;border-bottom: 1px solid #eee;
        }
    </style>
</head>
<body>
    <h2>Hospital managemrnt</h2>
    <div class = "container">
        <form>
            <span id="checkAgeValid"></span><br>
            <label>Email:</label>
            <input type="email" name = "email" required><br>
            <label>Password</label>
            <input type="password" name = "password" required><br>
            
            <input type ="submit" class="btn btn-success" id="hospital_submit" value ="POST">
        </form>

    </div>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        $('#hospital_submit').click(function(event){
            event.preventDefault();
            var token = localStorage.getItem('token');
            if (token) {
                axios.defaults.headers.common['Authorization'] = `Basic ${token}`;
            }
            axios({
                method: 'post',
                url: 'http://127.0.0.1:8001/api/patient/login',
                data: {
                    email:'makindet74@gmail.com',
                    password: 'test1234'
                },
               // headers: {'Authorization': `Basic ${localStorage.getItem('token')}`},
              // headers: {"Authorization":`Basic ${localStorage.getItem('token')}`},
            })
            .then(function(response){
                console.log(response)
                localStorage.setItem('token', response.data.token);
                window.location.assign('http://127.0.0.1:8001/patient');
               // console.log(response.headers['Authorization']);
            })
            .catch(function(error){
                console.log(error);
            })

        })

    </script>

</body>

</html>